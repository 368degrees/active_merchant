dependencies:
  override:
    - bundle install --path vendor/rails40cache:
        environment:
          BUNDLE_GEMFILE: Gemfile_rails40

    - bundle install --path vendor/rails40cache:
        environment:
          BUNDLE_GEMFILE: Gemfile

    - bundle install --path vendor/rails31cache:
        environment:
          BUNDLE_GEMFILE: Gemfile_rails31

    - bundle install --path vendor/rails30cache:
        environment:
          BUNDLE_GEMFILE: Gemfile_rails31

    - bundle install --path vendor/rails23cache:
        environment:
          BUNDLE_GEMFILE: Gemfile_rails23

  cache_directories:
    - "vendor"

test:
  override:
    - rvm 2.1.0 do bundle exec rake test:
      environment:
        BUNDLE_GEMFILE: Gemfile_rails40

    - rvm 2.1.0 do bundle exec rake test:
      environment:
        BUNDLE_GEMFILE: Gemfile

    - rvm 2.1.0 do bundle exec rake test:
      environment:
        BUNDLE_GEMFILE: Gemfile_rails31

    - rvm 2.0.0 do bundle && bundle exec rake test
      environment:
        BUNDLE_GEMFILE: Gemfile_rails30